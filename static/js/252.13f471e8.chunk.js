"use strict";(self.webpackChunkreact_spa_template=self.webpackChunkreact_spa_template||[]).push([[252],{1252:function(e,t,i){i.r(t),i.d(t,{default:function(){return B}});var n=i(7294),r=i(4551),a=i(6447),c=i(2658),l=i(4854),o=i(5944);function s(e){return(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},size:"large",variant:"outlined",color:"inherit",onClick:e.getTicket,children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(l.Z,{}),(0,o.tZ)(c.Z,{children:"Get Ticket"})]})})}var u=i(6272),d=i(4449),h=i(4510),m=i(4927),Z=i(721);function g({submitCalculatePrice:e,submitPaymentChoice:t}){const[i,l]=(0,n.useState)(""),[s,g]=(0,n.useState)("button"),b=e=>{t(i,e),g("button")};return(0,o.BX)("main",{children:["button"==s&&(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},size:"large",variant:"outlined",color:"inherit",onClick:()=>{g("enter-barcode")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(d.Z,{}),(0,o.tZ)(c.Z,{children:"Begin Payment"})]})}),"enter-barcode"==s&&(0,o.BX)(a.Z,{direction:"column",spacing:2,justifyContent:"center",maxWidth:"100%",children:[(0,o.tZ)(u.Z,{required:!0,label:"Enter Barcode Here",placeholder:"16 Digit Barcode",variant:"outlined",fullWidth:!0,size:"large",onKeyDown:t=>{13==t.keyCode&&(t.preventDefault(),null!=e(i)&&g("choose-payment-method"))},onChange:e=>{l(e.target.value)}}),(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},color:"error",size:"large",variant:"contained",onClick:()=>{g("button")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(h.Z,{}),(0,o.tZ)(c.Z,{children:"Cancel"})]})})]}),"choose-payment-method"==s&&(0,o.BX)(a.Z,{direction:"column",spacing:2,justifyContent:"center",maxWidth:"100%",children:[(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},color:"inherit",size:"large",variant:"outlined",onClick:()=>{b("credit_card")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(m.Z,{}),(0,o.tZ)(c.Z,{children:"Credit Card"})]})}),(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},color:"inherit",size:"large",variant:"outlined",onClick:()=>{b("debit_card")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(m.Z,{}),(0,o.tZ)(c.Z,{children:"Debit Card"})]})}),(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},color:"inherit",size:"large",variant:"outlined",onClick:()=>{b("cash")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(Z.Z,{}),(0,o.tZ)(c.Z,{children:"Cash"})]})})]})]})}var b=i(9944);function f({submitGetTicketState:e}){const[t,i]=(0,n.useState)(""),[l,s]=(0,n.useState)("button");return(0,o.BX)("main",{children:["button"==l&&(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},size:"large",variant:"outlined",color:"inherit",onClick:()=>{s("enter-barcode")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(b.Z,{}),(0,o.tZ)(c.Z,{children:"Get Ticket State"})]})}),"enter-barcode"==l&&(0,o.BX)(a.Z,{direction:"column",spacing:2,justifyContent:"center",maxWidth:"100%",children:[(0,o.tZ)(u.Z,{required:!0,label:"Enter Barcode Here",placeholder:"16 Digit Barcode",variant:"outlined",fullWidth:!0,onKeyDown:i=>{13==i.keyCode&&(i.preventDefault(),null!=e(t)&&s("button"))},onChange:e=>{i(e.target.value)}}),(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},color:"error",size:"large",variant:"contained",onClick:()=>{s("button")},children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(h.Z,{}),(0,o.tZ)(c.Z,{children:"Cancel"})]})})]})]})}var k=i(7547);function y({capacity:e}){return(0,o.tZ)(r.Z,{sx:{width:"-webkit-fill-available"},size:"large",variant:"outlined",color:"inherit",children:(0,o.BX)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,o.tZ)(k.Z,{}),(0,o.BX)(c.Z,{children:["Spa Capacity: ",e]})]})})}var p=i(5725);const C=new Map(JSON.parse(localStorage.getItem("customers")));var S=localStorage.getItem("activeCustomerCount");class v extends n.Component{childToParent=e=>{barcode=e};submitCalculatePrice=e=>this.calculatePrice(e);submitPaymentChoice=(e,t)=>{this.payTicket(e,t)};submitGetTicketState=e=>this.getTicketState(e);getTicket=()=>{if(S>=60)return console.log("Sorry, the spa is currently full"),null;let e=(Math.random()+" ").substring(2,10)+(Math.random()+" ").substring(2,10);return C.set(e,{entryTime:Date.now(),ticketStatus:"unpaid",timePaid:null,paymentMethod:null}),console.log(C),localStorage.setItem("customers",JSON.stringify(Array.from(C.entries()))),S++,localStorage.setItem("activeCustomerCount",S),e};calculatePrice=e=>{("number"==typeof e||e instanceof Number)&&(e=e.toString());let t=C.get(e);if(t){if("paid"==t.ticketStatus)return 0;{let e=(Date.now()-t.entryTime)/1e3/60/60;if(e<=3)return console.log("Payment: $30"),30;{let t=Math.ceil(e-3);return console.log("Payment: $"+(30+3*t).toString()),30+3*t}}}return console.log("Barcode Invalid"),null};payTicket=(e,t)=>{("number"==typeof e||e instanceof Number)&&(e=e.toString());let i=C.get(e);return"paid"==i.ticketStatus?(console.log("Ticket already paid for"),"Ticket already paid for"):(i.ticketStatus="paid",i.paymentMethod=t,i.timePaid=Date.now(),C.set(e,i),localStorage.setItem("customers",JSON.stringify(Array.from(C.entries()))),--S,localStorage.setItem("activeCustomerCount",S),"Ticket "+e+" paid successfully")};getTicketState=e=>{("number"==typeof e||e instanceof Number)&&(e=e.toString());let t=C.get(e);return console.log(t),t?(console.log(t.ticketStatus),t.ticketStatus):null};getFreeSpaces=()=>60-S;componentDidMount(){window.getTicket=this.getTicket,window.calculatePrice=this.calculatePrice,window.payTicket=this.payTicket,window.getTicketState=this.getTicketState,window.getFreeSpaces=this.getFreeSpaces}render(){return(0,o.BX)(p.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:[(0,o.tZ)(p.ZP,{item:!0,xs:3,children:(0,o.tZ)(s,{getTicket:()=>{getTicket()}})}),(0,o.tZ)(p.ZP,{item:!0,xs:3,children:(0,o.tZ)(g,{submitCalculatePrice:this.submitCalculatePrice,submitPaymentChoice:this.submitPaymentChoice})}),(0,o.tZ)(p.ZP,{item:!0,xs:3,children:(0,o.tZ)(f,{submitGetTicketState:this.submitGetTicketState})}),(0,o.tZ)(p.ZP,{item:!0,xs:3,children:(0,o.tZ)(y,{capacity:60-S})})]})}}var w=v;const T={name:"agvie1",styles:"h1{font-size:5rem;font-weight:600;text-align:center;}"};var B=()=>(0,o.BX)("div",{css:[T,"",""],children:[(0,o.tZ)("h1",{className:"title",children:"Welcome to Simple Spa!"}),(0,o.tZ)(w,{})]})}}]);